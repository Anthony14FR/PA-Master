#!/bin/sh

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")
BRANCH_NAME=$(git rev-parse --abbrev-ref HEAD)

# VÃ©rifier cohÃ©rence branche/commit
if echo "$BRANCH_NAME" | grep -qE "^feature/" && ! echo "$COMMIT_MSG" | grep -qE "^feat:"; then
    echo "âŒ Branche 'feature/' doit avoir un commit 'feat:'"
    echo "Branche: $BRANCH_NAME | Commit: $COMMIT_MSG"
    echo "ğŸ˜ SignÃ©: le petit blond relou ğŸ˜˜"
    exit 1
elif echo "$BRANCH_NAME" | grep -qE "^fix/" && ! echo "$COMMIT_MSG" | grep -qE "^fix:"; then
    echo "âŒ Branche 'fix/' doit avoir un commit 'fix:'"
    echo "Branche: $BRANCH_NAME | Commit: $COMMIT_MSG"
    echo "ğŸ˜ SignÃ©: le petit blond relou ğŸ˜˜"
    exit 1
fi

echo "âœ… Message de commit valide bravo tiÃ© le goat"
exit 0